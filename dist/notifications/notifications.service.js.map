{"version":3,"sources":["../../src/notifications/notifications.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { PrismaService } from '../prisma/prisma.service';\nimport { NotificationType } from '@prisma/client';\n\n@Injectable()\nexport class NotificationsService {\n  constructor(private prisma: PrismaService) {}\n\n  async create(\n    userId: string,\n    title: string,\n    message: string,\n    type: NotificationType,\n  ) {\n    return this.prisma.notification.create({\n      data: { userId, title, message, type },\n    });\n  }\n\n  async findAll(userId: string) {\n    return this.prisma.notification.findMany({\n      where: { userId },\n      orderBy: { createdAt: 'desc' },\n    });\n  }\n\n  async markAsRead(id: string) {\n    return this.prisma.notification.update({\n      where: { id },\n      data: { isRead: true },\n    });\n  }\n\n  async delete(id: string) {\n    return this.prisma.notification.delete({ where: { id } });\n  }\n\n  async getUnreadCount(userId: string) {\n    return this.prisma.notification.count({\n      where: { userId, isRead: false },\n    });\n  }\n}\n"],"names":["NotificationsService","create","userId","title","message","type","prisma","notification","data","findAll","findMany","where","orderBy","createdAt","markAsRead","id","update","isRead","delete","getUnreadCount","count"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBALc;+BACG;;;;;;;;;;AAIvB,IAAA,AAAMA,uBAAN,MAAMA;IAGX,MAAMC,OACJC,MAAc,EACdC,KAAa,EACbC,OAAe,EACfC,IAAsB,EACtB;QACA,OAAO,IAAI,CAACC,MAAM,CAACC,YAAY,CAACN,MAAM,CAAC;YACrCO,MAAM;gBAAEN;gBAAQC;gBAAOC;gBAASC;YAAK;QACvC;IACF;IAEA,MAAMI,QAAQP,MAAc,EAAE;QAC5B,OAAO,IAAI,CAACI,MAAM,CAACC,YAAY,CAACG,QAAQ,CAAC;YACvCC,OAAO;gBAAET;YAAO;YAChBU,SAAS;gBAAEC,WAAW;YAAO;QAC/B;IACF;IAEA,MAAMC,WAAWC,EAAU,EAAE;QAC3B,OAAO,IAAI,CAACT,MAAM,CAACC,YAAY,CAACS,MAAM,CAAC;YACrCL,OAAO;gBAAEI;YAAG;YACZP,MAAM;gBAAES,QAAQ;YAAK;QACvB;IACF;IAEA,MAAMC,OAAOH,EAAU,EAAE;QACvB,OAAO,IAAI,CAACT,MAAM,CAACC,YAAY,CAACW,MAAM,CAAC;YAAEP,OAAO;gBAAEI;YAAG;QAAE;IACzD;IAEA,MAAMI,eAAejB,MAAc,EAAE;QACnC,OAAO,IAAI,CAACI,MAAM,CAACC,YAAY,CAACa,KAAK,CAAC;YACpCT,OAAO;gBAAET;gBAAQe,QAAQ;YAAM;QACjC;IACF;IAnCA,YAAY,AAAQX,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAoC9C"}