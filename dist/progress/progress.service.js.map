{"version":3,"sources":["../../src/progress/progress.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { PrismaService } from '../prisma/prisma.service';\n\n@Injectable()\nexport class ProgressService {\n  constructor(private prisma: PrismaService) {}\n\n  async markAsComplete(studentId: string, lessonId: string) {\n    return this.prisma.studentProgress.upsert({\n      where: {\n        studentId_lessonId: {\n          studentId,\n          lessonId,\n        },\n      },\n      update: {\n        completed: true,\n        completedAt: new Date(),\n      },\n      create: {\n        studentId,\n        lessonId,\n        completed: true,\n        completedAt: new Date(),\n      },\n    });\n  }\n\n  async getCourseProgress(studentId: string, courseId: string) {\n    return this.prisma.studentProgress.findMany({\n      where: {\n        studentId,\n        lesson: {\n          chapter: {\n            courseId,\n          },\n        },\n      },\n    });\n  }\n}\n"],"names":["ProgressService","markAsComplete","studentId","lessonId","prisma","studentProgress","upsert","where","studentId_lessonId","update","completed","completedAt","Date","create","getCourseProgress","courseId","findMany","lesson","chapter"],"mappings":";;;;+BAIaA;;;eAAAA;;;wBAJc;+BACG;;;;;;;;;;AAGvB,IAAA,AAAMA,kBAAN,MAAMA;IAGX,MAAMC,eAAeC,SAAiB,EAAEC,QAAgB,EAAE;QACxD,OAAO,IAAI,CAACC,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC;YACxCC,OAAO;gBACLC,oBAAoB;oBAClBN;oBACAC;gBACF;YACF;YACAM,QAAQ;gBACNC,WAAW;gBACXC,aAAa,IAAIC;YACnB;YACAC,QAAQ;gBACNX;gBACAC;gBACAO,WAAW;gBACXC,aAAa,IAAIC;YACnB;QACF;IACF;IAEA,MAAME,kBAAkBZ,SAAiB,EAAEa,QAAgB,EAAE;QAC3D,OAAO,IAAI,CAACX,MAAM,CAACC,eAAe,CAACW,QAAQ,CAAC;YAC1CT,OAAO;gBACLL;gBACAe,QAAQ;oBACNC,SAAS;wBACPH;oBACF;gBACF;YACF;QACF;IACF;IAlCA,YAAY,AAAQX,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAmC9C"}