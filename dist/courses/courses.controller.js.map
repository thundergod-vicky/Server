{"version":3,"sources":["../../src/courses/courses.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Body,\n  Param,\n  UseGuards,\n  Request,\n  Delete,\n} from '@nestjs/common';\nimport { CoursesService } from './courses.service';\nimport { JwtAuthGuard } from '../auth/jwt-auth.guard';\n\n@Controller('courses')\nexport class CoursesController {\n  constructor(private readonly coursesService: CoursesService) {}\n\n  @Post()\n  @UseGuards(JwtAuthGuard)\n  create(@Body() createCourseDto: any, @Request() req) {\n    return this.coursesService.create({\n      ...createCourseDto,\n      teacher: { connect: { id: req.user.id } },\n    });\n  }\n\n  @Get()\n  findAll() {\n    return this.coursesService.findAll();\n  }\n\n  @Get('teacher')\n  @UseGuards(JwtAuthGuard)\n  findAllByTeacher(@Request() req) {\n    return this.coursesService.findAllByTeacher(req.user.id);\n  }\n\n  @Get(':id')\n  findOne(@Param('id') id: string) {\n    return this.coursesService.findOne(id);\n  }\n\n  @Post(':id/chapters')\n  @UseGuards(JwtAuthGuard)\n  createChapter(@Param('id') courseId: string, @Body() data: any) {\n    return this.coursesService.createChapter({\n      ...data,\n      course: { connect: { id: courseId } },\n    });\n  }\n\n  @Post('chapters/:chapterId/lessons')\n  @UseGuards(JwtAuthGuard)\n  createLesson(@Param('chapterId') chapterId: string, @Body() data: any) {\n    return this.coursesService.createLesson({\n      ...data,\n      chapter: { connect: { id: chapterId } },\n    });\n  }\n\n  // Premium Course Assignment Endpoints\n  @Get('student/all')\n  @UseGuards(JwtAuthGuard)\n  getStudentCourses(@Request() req) {\n    return this.coursesService.getCoursesForStudent(req.user.id);\n  }\n\n  @Post(':id/assign')\n  @UseGuards(JwtAuthGuard)\n  assignStudents(\n    @Param('id') courseId: string,\n    @Body() data: { studentIds: string[]; deadline?: string },\n    @Request() req,\n  ) {\n    return this.coursesService.assignStudentsToCourse(\n      courseId,\n      req.user.id,\n      data.studentIds,\n      data.deadline ? new Date(data.deadline) : undefined,\n    );\n  }\n\n  @Delete(':id/assign/:studentId')\n  @UseGuards(JwtAuthGuard)\n  removeAssignment(\n    @Param('id') courseId: string,\n    @Param('studentId') studentId: string,\n    @Request() req,\n  ) {\n    return this.coursesService.removeAssignment(\n      courseId,\n      studentId,\n      req.user.id,\n    );\n  }\n\n  @Get(':id/assignments')\n  @UseGuards(JwtAuthGuard)\n  getAssignments(@Param('id') courseId: string, @Request() req) {\n    return this.coursesService.getAssignedStudents(courseId, req.user.id);\n  }\n}\n"],"names":["CoursesController","create","createCourseDto","req","coursesService","teacher","connect","id","user","findAll","findAllByTeacher","findOne","createChapter","courseId","data","course","createLesson","chapterId","chapter","getStudentCourses","getCoursesForStudent","assignStudents","assignStudentsToCourse","studentIds","deadline","Date","undefined","removeAssignment","studentId","getAssignments","getAssignedStudents"],"mappings":";;;;+BAcaA;;;eAAAA;;;wBALN;gCACwB;8BACF;;;;;;;;;;;;;;;AAGtB,IAAA,AAAMA,oBAAN,MAAMA;IAKXC,OAAO,AAAQC,eAAoB,EAAE,AAAWC,GAAG,EAAE;QACnD,OAAO,IAAI,CAACC,cAAc,CAACH,MAAM,CAAC;YAChC,GAAGC,eAAe;YAClBG,SAAS;gBAAEC,SAAS;oBAAEC,IAAIJ,IAAIK,IAAI,CAACD,EAAE;gBAAC;YAAE;QAC1C;IACF;IAGAE,UAAU;QACR,OAAO,IAAI,CAACL,cAAc,CAACK,OAAO;IACpC;IAIAC,iBAAiB,AAAWP,GAAG,EAAE;QAC/B,OAAO,IAAI,CAACC,cAAc,CAACM,gBAAgB,CAACP,IAAIK,IAAI,CAACD,EAAE;IACzD;IAGAI,QAAQ,AAAaJ,EAAU,EAAE;QAC/B,OAAO,IAAI,CAACH,cAAc,CAACO,OAAO,CAACJ;IACrC;IAIAK,cAAc,AAAaC,QAAgB,EAAE,AAAQC,IAAS,EAAE;QAC9D,OAAO,IAAI,CAACV,cAAc,CAACQ,aAAa,CAAC;YACvC,GAAGE,IAAI;YACPC,QAAQ;gBAAET,SAAS;oBAAEC,IAAIM;gBAAS;YAAE;QACtC;IACF;IAIAG,aAAa,AAAoBC,SAAiB,EAAE,AAAQH,IAAS,EAAE;QACrE,OAAO,IAAI,CAACV,cAAc,CAACY,YAAY,CAAC;YACtC,GAAGF,IAAI;YACPI,SAAS;gBAAEZ,SAAS;oBAAEC,IAAIU;gBAAU;YAAE;QACxC;IACF;IAEA,sCAAsC;IAGtCE,kBAAkB,AAAWhB,GAAG,EAAE;QAChC,OAAO,IAAI,CAACC,cAAc,CAACgB,oBAAoB,CAACjB,IAAIK,IAAI,CAACD,EAAE;IAC7D;IAIAc,eACE,AAAaR,QAAgB,EAC7B,AAAQC,IAAiD,EACzD,AAAWX,GAAG,EACd;QACA,OAAO,IAAI,CAACC,cAAc,CAACkB,sBAAsB,CAC/CT,UACAV,IAAIK,IAAI,CAACD,EAAE,EACXO,KAAKS,UAAU,EACfT,KAAKU,QAAQ,GAAG,IAAIC,KAAKX,KAAKU,QAAQ,IAAIE;IAE9C;IAIAC,iBACE,AAAad,QAAgB,EAC7B,AAAoBe,SAAiB,EACrC,AAAWzB,GAAG,EACd;QACA,OAAO,IAAI,CAACC,cAAc,CAACuB,gBAAgB,CACzCd,UACAe,WACAzB,IAAIK,IAAI,CAACD,EAAE;IAEf;IAIAsB,eAAe,AAAahB,QAAgB,EAAE,AAAWV,GAAG,EAAE;QAC5D,OAAO,IAAI,CAACC,cAAc,CAAC0B,mBAAmB,CAACjB,UAAUV,IAAIK,IAAI,CAACD,EAAE;IACtE;IArFA,YAAY,AAAiBH,cAA8B,CAAE;aAAhCA,iBAAAA;IAAiC;AAsFhE"}